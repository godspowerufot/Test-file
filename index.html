<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SQUAD Game Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #00ffcc;
      font-family: 'Orbitron', sans-serif;
    }
    .navbar {
      background-color: #0b0b0b;
      box-shadow: 0 2px 10px #0ff;
    }
    .navbar-brand, .btn-green {
      color: #00ffff;
      text-shadow: 0 0 5px #0ff;
    }
    .product-card {
      border: 1px solid #0ff;
      border-radius: 10px;
      background-color: #121212;
      padding: 15px;
      text-align: center;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .product-card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px #00ffff;
    }
    .product-card img {
      max-width: 100%;
      height: 150px;
      object-fit: contain;
    }
    .cart-dropdown {
      position: absolute;
      top: 70px;
      right: 20px;
      background: #111;
      box-shadow: 0 0 15px #0ff;
      border-radius: 10px;
      width: 300px;
      z-index: 1000;
      display: none;
      color: #00ffcc;
    }
    .cart-item {
      padding: 10px;
      border-bottom: 1px solid #0ff;
    }
    .modal-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1050;
    }
    .modal-content {
      background: #181818;
      color: #00ffff;
      border-radius: 10px;
      padding: 20px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 0 20px rgba(0,255,255,0.3);
    }
    .btn-green {
      background-color: #00ffff;
      color: #000;
      font-weight: bold;
      border: none;
    }
    .btn-green:hover {
      background-color: #0ff;
    }
    input.form-control {
      background: #222;
      color: #0ff;
      border: 1px solid #0ff;
      font-family: 'Orbitron', sans-serif;
    }
    input.form-control:focus {
      background: #111;
      color: #00ffff;
      border-color: #00ffff;
      box-shadow: 0 0 5px #0ff;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">GameCart</a>
    <button class="btn btn-green" onclick="toggleCart()">ðŸ›’ Cart (<span id="cart-count">0</span>)</button>
  </div>
</nav>

<div class="cart-dropdown" id="cart-dropdown">
  <div id="cart-items"></div>
  <div class="p-3">
    <h6>Total: â‚¦<span id="cart-total">0</span></h6>
    <button class="btn btn-green w-100" onclick="openModal()">Pay</button>
  </div>
</div>

<div class="container mt-5 pt-5">
  <div class="row" id="product-list">
    <!-- Product Cards -->
  </div>
</div>

<div class="modal-bg" id="checkout-modal">
  <div class="modal-content">
    <h5 class="mb-3">Complete Your Payment</h5>
    <form>
      <div class="mb-3">
        <label>Email address</label>
        <input type="email" class="form-control" id="email-address" required>
      </div>
      <div class="mb-3">
        <label>First Name</label>
        <input type="text" class="form-control" id="first-name">
      </div>
      <div class="mb-3">
        <label>Last Name</label>
        <input type="text" class="form-control" id="last-name">
      </div>
      <button type="button" class="btn btn-green w-100" onclick="SquadPay()">Proceed to Pay</button>
    </form>
  </div>
</div>

<script src="https://checkout.squadco.com/widget/squad.min.js"></script>
<script>
  const products = [
    { name: 'Game Headset', price: 4500, image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZZdxIiPJel1UVss-c9iKNWnI2kAUWGPSrQB3-QdRcBiYu6doPG4_up0V1FCF3ks5bmFM&usqp=CAU' },
    { name: 'RGB Gaming Mouse', price: 2500, image: 'https://img.freepik.com/free-photo/view-illuminated-neon-gaming-keyboard-setup-controller_23-2149529367.jpg?t=st=1743845308~exp=1743848908~hmac=e0d49809bd745d51b9dff1479188d15ac8a8eae89bcd88ced01087a926d52047&w=900' },
    { name: 'Mechanical Keyboard', price: 8000, image: 'https://img.freepik.com/free-photo/view-illuminated-neon-gaming-keyboard-setup-controller_23-2149529367.jpg?t=st=1743845308~exp=1743848908~hmac=e0d49809bd745d51b9dff1479188d15ac8a8eae89bcd88ced01087a926d52047&w=900' },
  ];

  const cart = [];

  function renderProducts() {
    const container = document.getElementById('product-list');
    container.innerHTML = '';
    products.forEach(product => {
      container.innerHTML += `
        <div class="col-md-4 mb-4">
          <div class="product-card">
            <img src="${product.image}" alt="${product.name}">
            <h5 class="mt-2">${product.name}</h5>
            <p>â‚¦${product.price}</p>
            <button class="btn btn-green" onclick='addToCart(${JSON.stringify(product)})'>Add to Cart</button>
          </div>
        </div>
      `;
    });
  }

  function addToCart(product) {
    cart.push(product);
    updateCart();
  }

  function updateCart() {
    document.getElementById('cart-count').innerText = cart.length;
    const cartItems = document.getElementById('cart-items');
    cartItems.innerHTML = '';
    let total = 0;
    cart.forEach(item => {
      total += item.price;
      cartItems.innerHTML += `<div class='cart-item'>${item.name} - â‚¦${item.price}</div>`;
    });
    document.getElementById('cart-total').innerText = total;
  }

  function toggleCart() {
    const dropdown = document.getElementById('cart-dropdown');
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
  }

  function openModal() {
    document.getElementById('checkout-modal').style.display = 'flex';
  }

  function closeModal() {
    document.getElementById('checkout-modal').style.display = 'none';
  }

  window.onclick = function(event) {
    const modal = document.getElementById('checkout-modal');
    if (event.target === modal) {
      closeModal();
    }
  }

  function SquadPay() {
    const email = document.getElementById("email-address").value;
    let total = cart.reduce((sum, item) => sum + item.price, 0);
    if (!email || total < 100) {
      alert("Please fill in a valid email and ensure total is at least â‚¦100");
      return;
    }
    const squadInstance = new squad({
      onClose: () => console.log("Widget closed"),
      onLoad: () => console.log("Widget loaded successfully"),
      onSuccess: () => console.log("Payment successful"),
      key: "sandbox_pk_a0d99fc4fcd50c5ac6c0fb42f257f467d7ac40a3126e",       email: email,
      amount: total * 100,
      currency_code: "NGN"
    });
    squadInstance.setup();
    squadInstance.open();     
  }

  renderProducts();
</script>
</body>
</html>